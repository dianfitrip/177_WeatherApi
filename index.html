<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cuaca</title>

</head>
<body>

    <div class="container">
        <h3>Lokasi</h3>
        <input type="text" id="inputLokasi" value="Yogyakarta" placeholder="Masukkan nama kota...">
        <button id="tombolGet">Get</button>
        <hr> <h3>Cuaca</h3>
        <p>Suhu Celcius: <span id="suhu_c">-</span> °C</p>
        <p>Suhu Fahrenheit: <span id="suhu_f">-</span> °F</p>
        <p>Kelembapan: <span id="kelembapan">-</span> %</p>

        <h3>Lokasi</h3>
        <p>Negara: <span id="negara">-</span></p>
        <p>Provinsi: <span id="provinsi">-</span></p>
        <p>Kecamatan/Kota: <span id="kota">-</span></p>
        <p>Longitude: <span id="longitude">-</span></p>
        <p>Latitut: <span id="latitut">-</span></p>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

    
    <script>
        // Mendefinisikan sebuah fungsi bernama 'getWeather' yang menerima satu parameter: 'lokasi'.
        // Fungsi ini bisa dipanggil berulang kali untuk lokasi yang berbeda.
        function getWeather(lokasi) {
            // Kunci API unik Anda dari website weatherapi.com
            const apiKey = "d0b2b6b1294e4872adc65553250710"; 
            
            // Membangun URL API secara dinamis menggunakan 'template literal' (tanda `).
            // Variabel 'apiKey' dan 'lokasi' akan dimasukkan ke dalam URL.
            const urlApi = `https://api.weatherapi.com/v1/current.json?key=${apiKey}&q=${lokasi}&aqi=no`;

            // Memulai permintaan data ke server API menggunakan fungsi 'ajax' dari jQuery.
            $.ajax({
                url: urlApi,    // URL tujuan permintaan
                method: "GET",  // Metode permintaan (GET untuk mengambil data)
                
                // 'success' adalah fungsi yang akan dijalankan JIKA permintaan berhasil.
                // Parameter 'data' berisi objek JSON yang dikirim oleh server API.
                success: function(data) {
                    // Menampilkan seluruh objek data di console browser, berguna untuk debugging.
                    console.log(data);
                    
                    // -- Memasukkan data dari API ke elemen-elemen HTML --
                    // '$('#id_elemen')' adalah cara jQuery memilih elemen berdasarkan ID-nya.
                    // '.text(nilai)' adalah cara jQuery mengubah konten teks dari elemen tersebut.
                    
                    // Mengisi data cuaca
                    $('#suhu_c').text(data.current.temp_c);
                    $('#suhu_f').text(data.current.temp_f);
                    $('#kelembapan').text(data.current.humidity);

                    // Mengisi data lokasi
                    $('#negara').text(data.location.country);
                    $('#provinsi').text(data.location.region);
                    $('#kota').text(data.location.name);
                    $('#longitude').text(data.location.lon);
                    $('#latitut').text(data.location.lat);
                },
                
                // 'error' adalah fungsi yang akan dijalankan JIKA permintaan gagal.
                error: function(error) {
                    console.log(error); // Menampilkan detail error di console.
                    alert("Lokasi tidak ditemukan atau terjadi kesalahan."); // Memberi notifikasi ke pengguna.
                }
            });
        }

        // --- Event Listeners: Kode yang Menunggu Aksi dari Pengguna ---

        // Menambahkan 'event listener' ke tombol dengan id 'tombolGet'.
        // Fungsi di dalamnya akan berjalan setiap kali tombol tersebut di-klik.
        $('#tombolGet').on('click', function() {
            // Mengambil nilai (teks) yang sedang ada di dalam kotak input 'inputLokasi'.
            const lokasiInput = $('#inputLokasi').val();
            
            // Memeriksa apakah input tidak kosong.
            if (lokasiInput) {
                // Jika tidak kosong, panggil fungsi getWeather dengan nilai dari input.
                getWeather(lokasiInput);
            } else {
                // Jika kosong, beri peringatan.
                alert("Silakan masukkan nama lokasi.");
            }
        });

    </script>
</body>
</html>